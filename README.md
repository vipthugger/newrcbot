# Resale Community Bot

Telegram бот для управління оголошеннями в ресейл-спільноті. Портований з Python (aiogram) на TypeScript (Telegraf) з повним збереженням оригінальної функціональності + механіка підписок.

## Налаштування

1. Додайте бота в чат як адміністратора
2. Створіть тему (topic) для оголошень
3. У цій темі напишіть команду `/resale_topic`
4. Бот почне модерувати оголошення тільки в цій темі

## Тарифи підписок

### BASIC (безкоштовний, за замовчуванням)
- Ліміт: 1 оголошення / 24 години
- Формат: обов'язково `#куплю` або `#продам`
- Мінімальна ціна: 3000 грн (1500 грн для #футболка)

### BASIC+ (платний)
- Ліміт: 3 оголошення / 12 годин
- Формат: обов'язково `#куплю` або `#продам`
- Мінімальна ціна: 3000 грн (1500 грн для #футболка)

### SHOP / SELLER+ (платний)
- Ліміт: 10 оголошень / 12 годин
- Вільний формат (без обов'язкових хештегів)
- Оголошення визначається за тригерами: `price`, `ціна`, `цена` + число

## Система XP та рангів

Бот нараховує XP за повідомлення (максимум 100 XP на день):

| Ранг | Необхідно XP |
|------|-------------|
| Новачок | 0 |
| Учасник | 50 |
| Активіст | 150 |
| Авторитет | 300 |
| Ветеран | 600 |
| Легенда | 1000 |

Спеціальні ранги (призначаються адмінами):
- **Ресейлер** — бонуси для активних продавців
- **Адміністратор** — для адмінів чату

## Команди

### Для адміністрації
- `/resale_topic` — встановити тему для оголошень
- `/set basic+` (відповіддю) — видати BASIC+
- `/set shop` (відповіддю) — видати SHOP
- `/unset` (відповіддю) — скинути до BASIC
- `/resetcd` (відповіддю) — скинути кулдаун
- `/notification` — надіслати правила
- `/set_report_chat` — встановити чат для скарг

### XP адміністрування
- `/addxp 100` (відповіддю) — додати XP
- `/removexp 100` (відповіддю) — забрати XP
- `/setrank Ресейлер` (відповіддю) — встановити ранг
- `/resetxp` (відповіддю) — скинути XP

### Для користувачів
- `/myprofile` — переглянути свій профіль
- `/perks` — список рангів та вимог
- `/top` — топ-10 за XP
- `/report [причина]` (відповіддю) — поскаржитись

## Правила модерації

- Бот реагує **тільки** на повідомлення в темі, встановленій через `/resale_topic`
- Адміністратори чату мають повні права і їх повідомлення не модеруються
- Стікери заборонені у темі оголошень
- Фото/відео без опису видаляються
- Всі попередження автоматично видаляються через 3 секунди
- Захист від флуду: одне попередження на 30 секунд

## Технічний стек

- **Runtime:** Node.js з TypeScript
- **Bot Framework:** Telegraf
- **Database:** PostgreSQL з Drizzle ORM
- **Original:** Портовано з Python aiogram
